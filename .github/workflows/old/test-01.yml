name: "01 boost"

on:
  workflow_dispatch:
  push:
    tags:
      - '*'

permissions:
  contents: write

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  test:
    runs-on: ubuntu-latest
    env:
      container_name: "boost"
    steps:
      - run: |
          echo "Release archive for ${{ github.ref_name }}" > ${{ github.ref_name }}-b2-nodocs.zip
          echo "SHA256 checksum placeholder" > ${{ github.ref_name }}-b2-nodocs.zip.txt
          echo "Release archive for ${{ github.ref_name }}" > ${{ github.ref_name }}-b2-nodocs.7z
          echo "SHA256 checksum placeholder" > ${{ github.ref_name }}-b2-nodocs.7z.txt

      - uses: softprops/action-gh-release@v2
        with:
          files: |
            ${{ github.ref_name }}-b2-nodocs.zip
            ${{ github.ref_name }}-b2-nodocs.zip.txt
            ${{ github.ref_name }}-b2-nodocs.7z
            ${{ github.ref_name }}-b2-nodocs.7z.txt
          make_latest: ${{ contains(github.ref_name, '.beta') && 'false' || 'true' }}

